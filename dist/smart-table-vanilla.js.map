{"version":3,"file":"smart-table-vanilla.js","sources":["../lib/loadingIndicator.js","../lib/sort.js","../lib/helpers.js","../lib/filters.js","../lib/search.js","../lib/table.js"],"sourcesContent":["import {workingIndicatorDirective} from 'smart-table-core';\n\nexport default function ({table, el}) {\n  const component = workingIndicatorDirective({table});\n  component.onExecutionChange(function ({working}) {\n    el.classList.remove('st-working');\n    if (working === true) {\n      el.classList.add('st-working');\n    }\n  });\n  return component;\n};","import {sortDirective} from 'smart-table-core';\n\nexport default function ({el, table, conf = {}}) {\n  const pointer = conf.pointer || el.getAttribute('data-st-sort');\n  const cycle = conf.cycle || el.hasAttribute('data-st-sort-cycle');\n  const component = sortDirective({pointer, table, cycle});\n  component.onSortToggle(({pointer:currentPointer, direction}) => {\n    el.classList.remove('st-sort-asc', 'st-sort-desc');\n    if (pointer === currentPointer && direction !== 'none') {\n      const className = direction === 'asc' ? 'st-sort-asc' : 'st-sort-desc';\n      el.classList.add(className);\n    }\n  });\n  const eventListener = ev => component.toggle();\n  el.addEventListener('click', eventListener);\n  return component;\n}","export function debounce (fn, delay) {\n  let timeoutId;\n  return (ev) => {\n    if (timeoutId) {\n      window.clearTimeout(timeoutId);\n    }\n    timeoutId = window.setTimeout(function () {\n      fn(ev);\n    }, delay);\n  };\n};","import {filterDirective} from 'smart-table-core';\nimport {debounce} from './helpers'\n\nexport default function filterInput ({table, el, delay = 400, conf = {}}) {\n  const pointer = conf.pointer || el.getAttribute('data-st-filter');\n  const operator = conf.operator || el.getAttribute('data-st-filter-operator') || 'includes';\n  const elType = el.hasAttribute('type') ? el.getAttribute('type') : 'string';\n  let type = conf.type || el.getAttribute('data-st-filter-type');\n  if (!type) {\n    type = ['date', 'number'].includes(elType) ? elType : 'string';\n  }\n  const component = filterDirective({table, pointer, type, operator});\n  const eventListener = debounce(ev => component.filter(el.value), delay);\n  el.addEventListener('input', eventListener);\n  if (el.tagName === 'SELECT') {\n    el.addEventListener('change', eventListener);\n  }\n  return component;\n};","import {searchDirective} from 'smart-table-core';\nimport {debounce} from './helpers';\n\nexport default function ({el, table, delay = 400, conf = {}}) {\n  const scope = conf.scope || (el.getAttribute('data-st-search') || '').split(',').map(s => s.trim());\n  const component = searchDirective({table, scope});\n  const eventListener = debounce(ev => {\n    component.search(el.value);\n  }, delay);\n  el.addEventListener('input', eventListener);\n};","import loading from './loadingIndicator';\nimport sort from  './sort';\nimport filter from './filters'\nimport searchInput from './search'\n\nexport default function ({el, table}) {\n  // boot\n  [...el.querySelectorAll('[data-st-sort]')].forEach(el => sort({el, table}));\n  [...el.querySelectorAll('[data-st-loading-indicator]')].forEach(el => loading({el, table}));\n  [...el.querySelectorAll('[data-st-search]')].forEach(el => searchInput({el, table}));\n  [...el.querySelectorAll('[data-st-filter]')].forEach(el => filter({el, table}));\n\n  //extension\n  const tableDisplayChange = table.onDisplayChange;\n  return Object.assign(table, {\n    onDisplayChange: (listener) => {\n      tableDisplayChange(listener);\n      table.exec();\n    }\n  });\n};"],"names":["workingIndicatorDirective","sortDirective","filterDirective","searchDirective","filter"],"mappings":"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"}